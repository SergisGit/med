!function(t){function i(i,n){function s(t,o){var r=0|u.prop("scroll"+o.Dim),e=i["inner"+o.Dim](),s=u["inner"+o.Dim](),l=e-n["offset"+o.Dir]-n["offset"+o.Dir2];f["x"==t?"y":"x"]||(l-=n["track"+o.Dim]);var a=Math.max(l*e/r|0,n["barMin"+o.Dim]);return{ratio:(l-a)/(r-s),dim:e,scroll:l,total:r,bar:a}}function l(){t.each(d,a)}function a(t,o){var r=s(t,o);if(r.total){var e=u["scroll"+o.Dir]();if(h[t].scrollPos!==e||h[t].scroll!==r.scroll||h[t].total!==r.total){h[t]=r,h[t].scrollPos=e;var l=r.bar>=r.scroll;l!==f[t]&&(i.toggleClass(n.prefix+"hidden"+o.suffix,l),f[t]=l);var a=e*r.ratio;a<0&&(a=0),a>r.scroll-r.bar&&(a=r.scroll-r.bar),D[t][o.dim](r.bar).css(o.dir,n["offset"+o.Dir]+a)}}}var c=i.data("custom-scroll"),d={},h={},f={x:+(n=c?c.options:t.extend({},o,n)).vertical,y:+n.horizontal};if(n.horizontal&&(d.x=e,h.x={}),n.vertical&&(d.y=r,h.y={}),i.hasClass(n.prefix+"container")&&c)return c.updateBars(),c;var u=i.children("."+n.prefix+"inner");u.length||(u=i.wrapInner('<div class="'+n.prefix+'inner"></div>').children()),i.addClass(n.prefix+"container");var p=t('<div class="'+n.prefix+'inner" />').width(100).height(100).appendTo("body").css({overflow:"scroll"})[0],m=p.offsetWidth-p.clientWidth,g=p.offsetHeight-p.clientHeight;p.parentElement.removeChild(p),n.vertical?(u.css({paddingLeft:i.css("paddingLeft"),paddingRight:i.css("paddingRight"),marginRight:-m+"px"}),i.css({paddingLeft:0,paddingRight:0})):u.css({overflowY:"hidden"}),n.horizontal?(u.css({marginBottom:-g+"px",paddingBottom:g+"px"}),i.css({paddingTop:0,paddingBottom:0})):u.css({overflowX:"hidden"});var v=i.css("maxHeight");parseInt(v)&&(i.css("maxHeight","none"),u.css("maxHeight",v)),i.scrollTop(0);var x=t("body"),D={};t.each(d,function(o,r){i["scroll"+r.Dir](0);var e=n.prefix+"bar"+r.suffix,l=i.children("."+e);l.length||(l=t(n.barHtml).addClass(e).appendTo(i)),l.on("mousedown touchstart",function(t){t.preventDefault();var i=u["scroll"+r.Dir](),e=t[r.clientAxis]||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0][r.clientAxis],n=s(o,r).ratio;x.on("mousemove.custom-scroll touchmove.custom-scroll",function(t){t.preventDefault();var o=t[r.clientAxis]||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0][r.clientAxis];u["scroll"+r.Dir](i+(o-e)/n)}),x.on("mouseup.custom-scroll touchend.custom-scroll",function(){x.off(".custom-scroll")})}),D[o]=l}),u.on("scroll",l),l(),n.preventParentScroll&&u.on("DOMMouseScroll mousewheel",function(i){var o=t(this),r=this.scrollTop,e=this.scrollHeight,n=o.height();(("DOMMouseScroll"==i.type?-40*i.originalEvent.detail:i.originalEvent.wheelDelta)>0?0===r:r===e-n)&&i.preventDefault()});var b={$container:i,$bar:D.y,$barX:D.x,$inner:u,destroy:function(){t.each(d,function(t){D[t].remove()}),i.removeClass(n.prefix+"container").removeData("custom-scroll").css({padding:"",maxHeight:""}),u.contents().appendTo(i),u.remove()},updateBars:l,options:n};return i.data("custom-scroll",b),b}t.fn.customScroll=function(r){return this.length?"destroy"===r?(this.each(function(){var i=t(this).data("custom-scroll");i&&i.destroy()}),this):1===this.length?i(this,r):void this.each(function(){i(t(this),r)}):t.extend(o,r)};var o={prefix:"custom-scroll_",barMinHeight:10,barMinWidth:10,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0,trackWidth:10,trackHeight:10,barHtml:"<div />",vertical:!0,horizontal:!0,preventParentScroll:!0},r={dim:"height",Dim:"Height",dir:"top",Dir:"Top",dir2:"bottom",Dir2:"Bottom",clientAxis:"clientY",suffix:"-y"},e={dim:"width",Dim:"Width",dir:"left",Dir:"Left",dir2:"right",Dir2:"Right",clientAxis:"clientX",suffix:"-x"}}(jQuery);